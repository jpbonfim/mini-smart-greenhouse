<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <title>Estufa - Controle via Bluetooth</title>
  <style>
    body{font-family:sans-serif;margin:30px;}
    .card{border:1px solid #ccc;border-radius:8px;padding:16px;max-width:480px;}
    button{margin-top:10px;padding:8px 12px;}
    select{padding:6px;}
    .status{margin-top:12px;color:#333;}
  </style>
</head>
<body>
  <h1>ðŸŒ¿ Estufa - Controle Bluetooth</h1>
  <div class="card">
    <label>Escolha a predefiniÃ§Ã£o:</label><br>
    <select id="preset">
      <option value="ManjericÃ£o">ManjericÃ£o</option>
      <option value="Alface">Alface</option>
      <option value="Tomate">Tomate</option>
      <option value="Pimenta">Pimenta</option>
      <option value="Personalizado">Personalizado</option>
    </select>
    <input id="custom" placeholder="Nome personalizado" style="display:none;margin-left:8px;">
    <button id="sendBtn">Enviar</button>

    <div class="status" id="status">Status: aguardando...</div>
  </div>

  <script>
    const preset = document.getElementById('preset');
    const custom = document.getElementById('custom');
    const sendBtn = document.getElementById('sendBtn');
    const statusEl = document.getElementById('status');

    preset.addEventListener('change', ()=>{
      custom.style.display = preset.value === 'Personalizado' ? 'inline-block' : 'none';
    });

    sendBtn.addEventListener('click', async ()=>{
      let name = preset.value;
      if(name === 'Personalizado') name = custom.value || 'Personalizado';
      const msg = `PRESET:${name}`;
      const res = await fetch('/send', {
        method:'POST',
        headers:{'Content-Type':'application/json'},
        body:JSON.stringify({message:msg})
      });
      const data = await res.json();
      statusEl.textContent = data.message;
    });
  </script>
</body>
</html>
